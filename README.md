# 八字計算機 & 紫微命盤解析系統

一個現代化的網頁應用，整合八字命理和紫微斗數，提供 AI 智能解析與精美的視覺化命盤。

## 🌟 核心特色

### ✨ 雙命理系統
- **八字四柱**: 完整的八字計算、五行分析、十神推算、大運流年
- **紫微斗數**: 十二宮位排盤、14主星配置、四化飛星、大限流年

### 🎨 精美視覺化
- **雙佈局設計**: 傳統方格盤 + 現代圓盤，可自由切換
- **星盤圖片生成**: 支援 PNG/SVG 高畫質匯出
- **互動式命盤**: 懸停放大、點擊詳情、動態展示
- **專業表格**: 四種數據表格，完整呈現命盤資訊

### 🤖 AI 智能解析
- **多 AI 支援**: OpenAI GPT-4 / Anthropic Claude / Google Gemini
- **深度分析**: 8大生活面向預測（事業、財運、感情、健康等）
- **多語系回應**: 支援繁中/簡中/英文三語系

### 🌍 國際化
- **三語系介面**: 繁體中文（預設）、簡體中文、英文
- **即時切換**: 語言切換立即生效，無需重新整理
- **完整翻譯**: UI、命盤、AI 解析全面多語化

### 📤 強大匯出
- **PDF 報告**: 含命盤圖 + AI 分析完整報告
- **多格式圖片**: PNG/JPEG/SVG，支援多種解析度
- **社群分享**: 1200x1200 社群專用分享圖（含浮水印）

---

## 📚 專案文件

### 核心規格書
- **[PROJECT_SPEC.md](PROJECT_SPEC.md)** - 完整專案規格書
  - 功能需求清單
  - 前端技術架構（Vue 3 + Pinia + Tailwind）
  - 後端 API 規格（Python FastAPI）
  - 開發階段規劃（6 Phases）
  - 測試策略
  - 部署架構

### 設計規格書
- **[DESIGN_SPEC.md](DESIGN_SPEC.md)** - 視覺化與設計規格
  - 紫微斗數 8 大生活預測面向詳解
  - 雙佈局設計方案（方格盤 + 圓盤）
  - 四種專業表格設計
  - 星盤圖片生成技術方案
  - Gemini UI 設計提示詞
  - 多語系實作細節
  - 匯出功能規格

---

## 🛠️ 技術棧

### 前端
- **框架**: Vue 3 (Composition API)
- **狀態管理**: Pinia
- **樣式**: Tailwind CSS
- **多語系**: Vue I18n
- **視覺化**: SVG / Canvas / Fabric.js
- **圖片生成**: html2canvas / dom-to-image
- **PDF 生成**: jsPDF

### 後端（規劃中）
- **框架**: Python FastAPI
- **曆法計算**: cnlunar, python-dateutil
- **AI 整合**: OpenAI SDK, Anthropic SDK, Google Generative AI
- **圖片處理**: Pillow, matplotlib

### AI Provider
- OpenAI (GPT-4, GPT-3.5-turbo)
- Anthropic (Claude 3 Opus/Sonnet)
- Google (Gemini Pro/Flash)

---

## 🎯 紫微斗數可預測的生活面向

### 1. 事業發展 (Career)
職業類型、發展時機、升遷運勢、創業適性、工作環境偏好

### 2. 財富運勢 (Wealth)
財富累積、正財偏財、投資理財、破財風險、賺錢方式

### 3. 感情婚姻 (Love & Marriage)
感情模式、配偶特質、婚姻運勢、桃花運、相處模式

### 4. 健康狀況 (Health)
先天體質、易患疾病、意外風險、健康低谷預警、養生方式

### 5. 家庭關係 (Family)
父母緣分、子女運勢、兄弟互動、家庭和諧、不動產運

### 6. 教育學習 (Education)
學習能力、適合領域、考試運勢、深造機會、技能培養

### 7. 人際社交 (Social)
社交能力、貴人小人、朋友類型、團隊合作、異地發展

### 8. 個人成長 (Personal Growth)
性格特質、人生使命、精神發展、興趣愛好、轉折時機

### 9. 流年運勢 (Annual Forecast)
每年運勢起伏、重大事件預警、吉凶時機、趨吉避凶

### 10. 大限運程 (10-Year Cycle)
十年人生主題、長期趨勢、階段性任務、宮位影響

---

## 🎨 視覺化設計

### 方格盤佈局（傳統）
```
┌─────────┬─────────┬─────────┬─────────┐
│   巳    │   午    │   未    │   申    │
│  父母宮  │  福德宮  │  田宅宮  │  事業宮  │
│  紫微   │         │         │  太陽   │
├─────────┼─────────┴─────────┼─────────┤
│   辰    │                   │   酉    │
│  兄弟宮  │   紫微命盤圖       │  交友宮  │
├─────────┤                   ├─────────┤
│   卯    │                   │   戌    │
│  夫妻宮  │                   │  遷移宮  │
├─────────┼─────────┬─────────┼─────────┤
│   寅    │   丑    │   子    │   亥    │
│  子女宮  │  財帛宮  │  疾厄宮  │ ★命宮  │
└─────────┴─────────┴─────────┴─────────┘
```

### 圓盤佈局（現代）
- 360度圓形排列，每宮30度
- 中心顯示命主資訊
- 支援旋轉、縮放、懸停互動

### 四種專業表格
1. **十二宮位總覽表** - 宮位、主星、輔煞、四化、強度評分
2. **主星特質對照表** - 14主星性格、職業、感情、財運特質
3. **流年運勢表** - 10年運勢預測（事業/財運/感情/健康）
4. **四化飛星速查表** - 十天干四化配置

---

## 📐 專案結構預覽

```
bazi-frontend/
├── src/
│   ├── components/
│   │   ├── common/          # 通用元件
│   │   ├── bazi/            # 八字元件
│   │   └── ziwei/           # 紫微元件
│   │       ├── ZiweiChartGrid.vue      # 方格盤
│   │       ├── ZiweiChartCircle.vue    # 圓盤
│   │       ├── StarIcon.vue            # 星曜圖示
│   │       ├── PalaceTable.vue         # 宮位表格
│   │       ├── AnnualForecast.vue      # 流年表
│   │       └── ChartExporter.vue       # 匯出功能
│   ├── views/
│   │   ├── HomePage.vue
│   │   ├── BaziPage.vue
│   │   ├── ZiweiPage.vue
│   │   └── AIAnalysisPage.vue
│   ├── stores/              # Pinia 狀態管理
│   ├── services/            # API 服務
│   ├── utils/               # 工具函數
│   │   ├── chartRenderer.js     # 命盤繪製
│   │   └── imageExporter.js     # 圖片匯出
│   └── i18n/                # 多語系
│       └── locales/
│           ├── zh-TW.json
│           ├── zh-CN.json
│           └── en-US.json

bazi-backend/
├── app/
│   ├── calculators/         # 核心計算邏輯
│   ├── services/            # 業務邏輯
│   ├── api/v1/              # API 路由
│   └── utils/               # 工具函數
```

---

## 🚀 開發階段（6 Phases）

### Phase 1: 基礎建設（2-3 週）
專案初始化、路由、Pinia、曆法轉換、基礎 UI 元件

### Phase 2: 八字模組（3-4 週）
八字計算、四柱展示、五行分析、十神、大運

### Phase 3: 紫微模組（3-4 週）
紫微排盤、宮位佈局、星曜配置、四化計算、視覺化

### Phase 4: AI 整合（2 週）
OpenAI/Claude/Gemini 整合、Prompt 設計、結果展示

### Phase 5: 進階功能（2 週）
歷史記錄、命盤對比、圖片匯出、多語系、響應式優化

### Phase 6: 測試與上線（1-2 週）
單元測試、E2E 測試、效能優化、部署 CI/CD

**預計總時程**: 13-17 週

---

## 🎨 給 Gemini 的設計提示

我們提供了一份完整的 **UI 設計提示詞**（見 DESIGN_SPEC.md），可直接用於 Google Gemini 生成設計稿。

提示詞包含：
- 色彩方案（五行配色）
- 佈局設計（方格盤 + 圓盤）
- 元件規格（宮位卡片、星曜圖示、表格）
- 互動效果（懸停、點擊、動畫）
- 響應式設計
- 無障礙標準

---

## 📖 快速開始（待實作）

```bash
# 克隆專案
git clone https://github.com/your-repo/bazi-ziwei-app.git

# 安裝前端依賴
cd bazi-frontend
npm install

# 啟動開發伺服器
npm run dev

# 安裝後端依賴
cd ../bazi-backend
pip install -r requirements.txt

# 啟動後端服務
uvicorn app.main:app --reload
```

---

## 🔑 環境變數配置

```env
# Frontend (.env)
VITE_API_BASE_URL=http://localhost:8000
VITE_DEFAULT_LOCALE=zh-TW

# Backend (.env)
OPENAI_API_KEY=sk-xxx
ANTHROPIC_API_KEY=sk-ant-xxx
GOOGLE_API_KEY=xxx
CORS_ORIGINS=http://localhost:5173
```

---

## 🌐 部署建議

### 方案一：全棧快速部署
- **Frontend**: Vercel / Netlify
- **Backend**: Railway / Render
- 優點：快速上線、免費額度
- 缺點：冷啟動延遲

### 方案二：雲端專業部署
- **Frontend**: AWS S3 + CloudFront
- **Backend**: AWS EC2 / GCP Cloud Run
- 優點：可擴展、效能佳
- 缺點：成本較高

---

## 📊 數據表格範例

### 十二宮位總覽

| 宮位 | 主星 | 四化 | 強度 | 重點提示 |
|------|------|------|------|---------|
| 命宮 ★ | 貪狼 | 化祿 | ⭐⭐⭐⭐⭐ | 桃花重，創意佳 |
| 財帛宮 | 天梁 | - | ⭐⭐⭐⭐ | 理財穩健 |
| 事業宮 | 太陽 | 化科 | ⭐⭐⭐⭐⭐ | 事業光明 |
| 夫妻宮 | 天同 | 化權 | ⭐⭐⭐⭐ | 配偶溫柔 |

### 流年運勢（範例）

| 年份 | 歲數 | 整體 | 事業 | 財運 | 感情 | 健康 | 重點事件 |
|------|------|------|------|------|------|------|---------|
| 2024 | 34 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | 財運極佳、桃花旺 |
| 2025 | 35 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | 事業突破、權力提升 |

---

## 🤝 貢獻指南（待補充）

歡迎提交 Issues 和 Pull Requests！

---

## 📄 授權

MIT License

---

## 📞 聯絡方式

- 專案 GitHub: (待建立)
- 問題回報: Issues
- 電子郵件: (待補充)

---

**文件版本**: v1.0
**最後更新**: 2025-11-29
**專案狀態**: 規劃階段（待開發）

---

## ⚡ 下一步

1. ✅ 完成專案規格書
2. ✅ 完成設計規格書
3. 🔲 使用 Gemini 生成 UI 設計稿
4. 🔲 初始化 Vue 3 專案
5. 🔲 建立基礎元件庫
6. 🔲 實作曆法轉換功能
7. 🔲 開發八字計算核心
8. 🔲 開發紫微排盤核心
9. 🔲 整合 AI API
10. 🔲 實作視覺化命盤
11. 🔲 開發多語系系統
12. 🔲 實作圖片匯出功能

---

**讓我們一起打造最專業的命理解析平台！** 🌟
