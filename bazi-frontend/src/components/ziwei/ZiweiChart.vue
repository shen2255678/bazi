<template>
  <Card>
    <CardHeader>
      <CardTitle class="text-center text-2xl">ç´«å¾®å‘½ç›¤</CardTitle>
    </CardHeader>
    <CardContent>

    <!-- å‚³çµ±æ–¹æ ¼ç›¤å¼ä½ˆå±€ -->
    <div class="palace-grid">
      <!-- ç¬¬ä¸€è¡Œï¼šå·³ã€åˆã€æœªã€ç”³ -->
      <Card
        class="palace-card cursor-pointer group"
        :class="getPalaceClass('çˆ¶æ¯å®®')"
        :style="{ borderWidth: '2px', borderStyle: 'solid' }"
        @click="openPalaceInfo('çˆ¶æ¯å®®')"
        :title="'é»æ“ŠæŸ¥çœ‹ ' + 'çˆ¶æ¯å®®' + ' è©³ç´°èªªæ˜'"
      >
        <div class="palace-branch">å·³</div>
        <div class="palace-name flex items-center gap-1">
          çˆ¶æ¯å®®
          <span class="info-hint opacity-0 group-hover:opacity-100 transition-opacity text-xs">â„¹ï¸</span>
        </div>
        <div class="palace-stars">
          <span
            class="star main-star cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
            @click.stop="openStarInfo('ç´«å¾®')"
            :title="'é»æ“ŠæŸ¥çœ‹ ç´«å¾® è©³ç´°èªªæ˜'"
          >ç´«å¾®</span>
          <span
            class="star main-star cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
            @click.stop="openStarInfo('å¤©åºœ')"
            :title="'é»æ“ŠæŸ¥çœ‹ å¤©åºœ è©³ç´°èªªæ˜'"
          >å¤©åºœ</span>
        </div>
      </Card>

      <Card
        class="palace-card cursor-pointer group"
        :class="getPalaceClass('ç¦å¾·å®®')"
        :style="{ borderWidth: '2px', borderStyle: 'solid' }"
        @click="openPalaceInfo('ç¦å¾·å®®')"
        :title="'é»æ“ŠæŸ¥çœ‹ ç¦å¾·å®® è©³ç´°èªªæ˜'"
      >
        <div class="palace-branch">åˆ</div>
        <div class="palace-name flex items-center gap-1">
          ç¦å¾·å®®
          <span class="info-hint opacity-0 group-hover:opacity-100 transition-opacity text-xs">â„¹ï¸</span>
        </div>
        <div class="palace-stars">
          <span
            class="star main-star cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
            @click.stop="openStarInfo('å¤©æ©Ÿ')"
            :title="'é»æ“ŠæŸ¥çœ‹ å¤©æ©Ÿ è©³ç´°èªªæ˜'"
          >å¤©æ©Ÿ</span>
          <span class="star assistant-star">å·¦è¼”</span>
        </div>
      </Card>

      <Card
        class="palace-card cursor-pointer group"
        :class="getPalaceClass('ç”°å®…å®®')"
        :style="{ borderWidth: '2px', borderStyle: 'solid' }"
        @click="openPalaceInfo('ç”°å®…å®®')"
        :title="'é»æ“ŠæŸ¥çœ‹ ç”°å®…å®® è©³ç´°èªªæ˜'"
      >
        <div class="palace-branch">æœª</div>
        <div class="palace-name flex items-center gap-1">
          ç”°å®…å®®
          <span class="info-hint opacity-0 group-hover:opacity-100 transition-opacity text-xs">â„¹ï¸</span>
        </div>
        <div class="palace-stars">
          <span
            class="star main-star cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
            @click.stop="openStarInfo('è²ªç‹¼')"
            :title="'é»æ“ŠæŸ¥çœ‹ è²ªç‹¼ è©³ç´°èªªæ˜'"
          >è²ªç‹¼[æ—º]</span>
        </div>
        <div class="palace-details">
          <div class="detail-section">
            <div class="detail-label">ä¸»æ˜Ÿ:</div>
            <div class="detail-value">è²ªç‹¼[æ—º]</div>
          </div>
          <div class="detail-section">
            <div class="detail-label">è¼”æ˜Ÿ:</div>
            <div class="detail-value">ç„¡</div>
          </div>
          <div class="detail-section">
            <div class="detail-label">å°æ˜Ÿ:</div>
            <div class="detail-value">å¤©è²´[å»Ÿ]</div>
          </div>
          <div class="detail-section">
            <div class="detail-label">å¤§é™:</div>
            <div class="detail-value">95~104è™›æ­²</div>
          </div>
        </div>
      </Card>

      <Card
        class="palace-card cursor-pointer group"
        :class="getPalaceClass('äº‹æ¥­å®®')"
        :style="{ borderWidth: '2px', borderStyle: 'solid' }"
        @click="openPalaceInfo('äº‹æ¥­å®®')"
        :title="'é»æ“ŠæŸ¥çœ‹ äº‹æ¥­å®® è©³ç´°èªªæ˜'"
      >
        <div class="palace-branch">ç”³</div>
        <div class="palace-name flex items-center gap-1">
          äº‹æ¥­å®®
          <span class="info-hint opacity-0 group-hover:opacity-100 transition-opacity text-xs">â„¹ï¸</span>
        </div>
        <div class="palace-stars">
          <span
            class="star main-star cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
            @click.stop="openStarInfo('å¤ªé™½')"
            :title="'é»æ“ŠæŸ¥çœ‹ å¤ªé™½ è©³ç´°èªªæ˜'"
          >å¤ªé™½</span>
          <span class="star assistant-star">æ–‡æ˜Œ</span>
        </div>
      </Card>

      <!-- ç¬¬äºŒè¡Œï¼šè¾°ã€ç©ºç™½ã€ç©ºç™½ã€é…‰ -->
      <Card
        class="palace-card cursor-pointer group"
        :class="getPalaceClass('å…„å¼Ÿå®®')"
        :style="{ borderWidth: '2px', borderStyle: 'solid' }"
        @click="openPalaceInfo('å…„å¼Ÿå®®')"
        :title="'é»æ“ŠæŸ¥çœ‹ å…„å¼Ÿå®® è©³ç´°èªªæ˜'"
      >
        <div class="palace-branch">è¾°</div>
        <div class="palace-name flex items-center gap-1">
          å…„å¼Ÿå®®
          <span class="info-hint opacity-0 group-hover:opacity-100 transition-opacity text-xs">â„¹ï¸</span>
        </div>
        <div class="palace-stars">
          <span
            class="star main-star cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
            @click.stop="openStarInfo('æ­¦æ›²')"
            :title="'é»æ“ŠæŸ¥çœ‹ æ­¦æ›² è©³ç´°èªªæ˜'"
          >æ­¦æ›²</span>
        </div>
      </Card>

      <div class="palace-center">
        <div class="center-content">
          <div class="center-info" v-if="birthDate">
            <div class="text-xs mb-1">{{ birthDate.year }}å¹´{{ birthDate.month }}æœˆ{{ birthDate.day }}æ—¥</div>
            <div class="text-xs mb-2">{{ birthDate.hour }}:{{ String(birthDate.minute).padStart(2, '0') }}</div>
          </div>
          <div class="center-meta">
            <div class="meta-item">
              <span class="meta-label">äº”è¡Œå±€æ•¸:</span>
              <span class="meta-value">åœŸäº”å±€</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">å‘½ä¸»:</span>
              <span class="meta-value">æ–‡æ›²</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">èº«ä¸»:</span>
              <span class="meta-value">å¤©ç›¸</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">å­å¹´æ–—å›:</span>
              <span class="meta-value">å·³</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">èº«å®®:</span>
              <span class="meta-value">æœª</span>
            </div>
          </div>
        </div>
      </div>

      <Card
        class="palace-card cursor-pointer group"
        :class="getPalaceClass('äº¤å‹å®®')"
        :style="{ borderWidth: '2px', borderStyle: 'solid' }"
        @click="openPalaceInfo('äº¤å‹å®®')"
        :title="'é»æ“ŠæŸ¥çœ‹ äº¤å‹å®® è©³ç´°èªªæ˜'"
      >
        <div class="palace-branch">é…‰</div>
        <div class="palace-name flex items-center gap-1">
          äº¤å‹å®®
          <span class="info-hint opacity-0 group-hover:opacity-100 transition-opacity text-xs">â„¹ï¸</span>
        </div>
        <div class="palace-stars">
          <span
            class="star main-star cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
            @click.stop="openStarInfo('å·¨é–€')"
            :title="'é»æ“ŠæŸ¥çœ‹ å·¨é–€ è©³ç´°èªªæ˜'"
          >å·¨é–€</span>
          <span class="star assistant-star">å¤©é­</span>
        </div>
      </Card>

      <!-- ç¬¬ä¸‰è¡Œï¼šå¯ã€ç©ºç™½ã€ç©ºç™½ã€æˆŒ -->
      <Card
        class="palace-card cursor-pointer group"
        :class="getPalaceClass('å¤«å¦»å®®')"
        :style="{ borderWidth: '2px', borderStyle: 'solid' }"
        @click="openPalaceInfo('å¤«å¦»å®®')"
        :title="'é»æ“ŠæŸ¥çœ‹ å¤«å¦»å®® è©³ç´°èªªæ˜'"
      >
        <div class="palace-branch">å¯</div>
        <div class="palace-name flex items-center gap-1">
          å¤«å¦»å®®
          <span class="info-hint opacity-0 group-hover:opacity-100 transition-opacity text-xs">â„¹ï¸</span>
        </div>
        <div class="palace-stars">
          <span
            class="star main-star cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
            @click.stop="openStarInfo('å¤©åŒ')"
            :title="'é»æ“ŠæŸ¥çœ‹ å¤©åŒ è©³ç´°èªªæ˜'"
          >å¤©åŒ</span>
          <span class="star assistant-star">å³å¼¼</span>
        </div>
      </Card>

      <div class="palace-spacer"></div>
      <div class="palace-spacer"></div>

      <Card
        class="palace-card cursor-pointer group"
        :class="getPalaceClass('é·ç§»å®®')"
        :style="{ borderWidth: '2px', borderStyle: 'solid' }"
        @click="openPalaceInfo('é·ç§»å®®')"
        :title="'é»æ“ŠæŸ¥çœ‹ é·ç§»å®® è©³ç´°èªªæ˜'"
      >
        <div class="palace-branch">æˆŒ</div>
        <div class="palace-name flex items-center gap-1">
          é·ç§»å®®
          <span class="info-hint opacity-0 group-hover:opacity-100 transition-opacity text-xs">â„¹ï¸</span>
        </div>
        <div class="palace-stars">
          <span
            class="star main-star cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
            @click.stop="openStarInfo('å¤©ç›¸')"
            :title="'é»æ“ŠæŸ¥çœ‹ å¤©ç›¸ è©³ç´°èªªæ˜'"
          >å¤©ç›¸</span>
          <span class="star assistant-star">ç¥¿å­˜</span>
        </div>
      </Card>

      <!-- ç¬¬å››è¡Œï¼šå¯…ã€ä¸‘ã€å­ã€äº¥ -->
      <Card
        class="palace-card cursor-pointer group"
        :class="getPalaceClass('å­å¥³å®®')"
        :style="{ borderWidth: '2px', borderStyle: 'solid' }"
        @click="openPalaceInfo('å­å¥³å®®')"
        :title="'é»æ“ŠæŸ¥çœ‹ å­å¥³å®® è©³ç´°èªªæ˜'"
      >
        <div class="palace-branch">å¯…</div>
        <div class="palace-name flex items-center gap-1">
          å­å¥³å®®
          <span class="info-hint opacity-0 group-hover:opacity-100 transition-opacity text-xs">â„¹ï¸</span>
        </div>
        <div class="palace-stars">
          <span
            class="star main-star cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
            @click.stop="openStarInfo('å»‰è²')"
            :title="'é»æ“ŠæŸ¥çœ‹ å»‰è² è©³ç´°èªªæ˜'"
          >å»‰è²</span>
          <span class="star sha-star">é™€ç¾…</span>
        </div>
      </Card>

      <Card
        class="palace-card cursor-pointer group"
        :class="getPalaceClass('è²¡å¸›å®®')"
        :style="{ borderWidth: '2px', borderStyle: 'solid' }"
        @click="openPalaceInfo('è²¡å¸›å®®')"
        :title="'é»æ“ŠæŸ¥çœ‹ è²¡å¸›å®® è©³ç´°èªªæ˜'"
      >
        <div class="palace-branch">ä¸‘</div>
        <div class="palace-name flex items-center gap-1">
          è²¡å¸›å®®
          <span class="info-hint opacity-0 group-hover:opacity-100 transition-opacity text-xs">â„¹ï¸</span>
        </div>
        <div class="palace-stars">
          <span
            class="star main-star cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
            @click.stop="openStarInfo('å¤©æ¢')"
            :title="'é»æ“ŠæŸ¥çœ‹ å¤©æ¢ è©³ç´°èªªæ˜'"
          >å¤©æ¢</span>
        </div>
      </Card>

      <Card
        class="palace-card cursor-pointer group"
        :class="getPalaceClass('ç–¾å„å®®')"
        :style="{ borderWidth: '2px', borderStyle: 'solid' }"
        @click="openPalaceInfo('ç–¾å„å®®')"
        :title="'é»æ“ŠæŸ¥çœ‹ ç–¾å„å®® è©³ç´°èªªæ˜'"
      >
        <div class="palace-branch">å­</div>
        <div class="palace-name flex items-center gap-1">
          ç–¾å„å®®
          <span class="info-hint opacity-0 group-hover:opacity-100 transition-opacity text-xs">â„¹ï¸</span>
        </div>
        <div class="palace-stars">
          <span
            class="star main-star cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
            @click.stop="openStarInfo('ä¸ƒæ®º')"
            :title="'é»æ“ŠæŸ¥çœ‹ ä¸ƒæ®º è©³ç´°èªªæ˜'"
          >ä¸ƒæ®º</span>
          <span class="star sha-star">åœ°åŠ«</span>
        </div>
      </Card>

      <Card
        class="palace-card life-palace cursor-pointer group"
        :class="getPalaceClass('å‘½å®®')"
        :style="{ borderColor: 'hsl(var(--primary))', borderWidth: '2px', borderStyle: 'solid' }"
        @click="openPalaceInfo('å‘½å®®')"
        :title="'é»æ“ŠæŸ¥çœ‹ å‘½å®® è©³ç´°èªªæ˜'"
      >
        <div class="palace-branch">äº¥</div>
        <div class="palace-name flex items-center gap-1">
          â˜…å‘½å®®
          <span class="info-hint opacity-0 group-hover:opacity-100 transition-opacity text-xs">â„¹ï¸</span>
        </div>
        <div class="palace-stars">
          <span
            class="star main-star cursor-pointer hover:ring-2 hover:ring-blue-400 transition-all"
            @click.stop="openStarInfo('è²ªç‹¼')"
            :title="'é»æ“ŠæŸ¥çœ‹ è²ªç‹¼ è©³ç´°èªªæ˜'"
          >è²ªç‹¼</span>
          <span class="star sihua sihua-lu">åŒ–ç¥¿</span>
        </div>
      </Card>
    </div>

      <!-- èªªæ˜æ–‡å­— -->
      <div class="mt-6 text-center text-sm text-muted-foreground">
        <p>â€» æ­¤ç‚ºç¤ºä¾‹å‘½ç›¤ï¼Œå¯¦éš›è¨ˆç®—åŠŸèƒ½é–‹ç™¼ä¸­</p>
        <p class="mt-2 text-xs text-muted-foreground opacity-75">ğŸ’¡ æç¤ºï¼šé»æ“Šå®®ä½åç¨±æŸ¥çœ‹èªªæ˜ï¼Œé»æ“Šä¸»æ˜ŸæŸ¥çœ‹ç‰¹é»</p>
      </div>
    </CardContent>
  </Card>
</template>

<script setup>
import { ref } from 'vue'
import { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card'

const props = defineProps({
  birthDate: {
    type: Object,
    default: null
  },
  formData: {
    type: Object,
    default: () => ({
      gender: 'male',
      birthDate: {},
      location: {}
    })
  }
})

const emit = defineEmits(['open-palace', 'open-star'])

// ç²å–å®®ä½é¡è‰²é¡åˆ¥
function getPalaceClass(palaceName) {
  const colorMap = {
    'å‘½å®®': 'palace-life',
    'å…„å¼Ÿå®®': 'palace-sibling',
    'å¤«å¦»å®®': 'palace-spouse',
    'å­å¥³å®®': 'palace-children',
    'è²¡å¸›å®®': 'palace-wealth',
    'ç–¾å„å®®': 'palace-health',
    'é·ç§»å®®': 'palace-travel',
    'äº¤å‹å®®': 'palace-friends',
    'äº‹æ¥­å®®': 'palace-career',
    'ç”°å®…å®®': 'palace-property',
    'ç¦å¾·å®®': 'palace-fortune',
    'çˆ¶æ¯å®®': 'palace-parents'
  }
  return colorMap[palaceName] || ''
}

// é»æ“Šå®®ä½
function openPalaceInfo(palaceName) {
  emit('open-palace', palaceName)
}

// é»æ“Šä¸»æ˜Ÿ
function openStarInfo(starName) {
  emit('open-star', starName)
}

// æª¢æŸ¥æ˜¯å¦ç‚ºä¸»æ˜Ÿï¼ˆæ­¤å‡½æ•¸ç›®å‰æœªä½¿ç”¨ï¼Œä¿ç•™ä»¥å‚™å°‡ä¾†éœ€è¦ï¼‰
function isMainStar(starName) {
  // ä¸»æ˜Ÿåˆ—è¡¨
  const mainStars = ['ç´«å¾®', 'å¤©æ©Ÿ', 'å¤ªé™½', 'æ­¦æ›²', 'å¤©åŒ', 'å»‰è²', 'å¤©åºœ', 'å¤ªé™°', 'è²ªç‹¼', 'å·¨é–€', 'å¤©ç›¸', 'å¤©æ¢', 'ä¸ƒæ®º', 'ç ´è»']
  return mainStars.includes(starName)
}

// å¾æ˜Ÿæ›œæ–‡å­—ä¸­æå–ä¸»æ˜Ÿåç¨±ï¼ˆè™•ç† [æ—º] ç­‰æ¨™è¨˜ï¼‰
// æ³¨æ„ï¼šæ­¤å‡½æ•¸ç›®å‰æœªä½¿ç”¨ï¼Œå› ç‚ºæ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨æ˜Ÿæ›œåç¨±
// ä¿ç•™ä»¥å‚™å°‡ä¾†éœ€è¦è™•ç†å¸¶æ¨™è¨˜çš„æ˜Ÿæ›œåç¨±æ™‚ä½¿ç”¨
function extractStarName(starText) {
  // ç§»é™¤ [æ—º]ã€[å»Ÿ] ç­‰æ¨™è¨˜
  return starText.replace(/\[.*?\]/g, '').trim()
}
</script>

<style scoped>
.ziwei-chart {
  max-width: 1200px;
  margin: 0 auto;
}

.palace-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(4, auto);
  gap: 0;
  max-width: 800px;
  margin: 0 auto;
  border: 3px solid hsl(var(--border));
  border-radius: 0.5rem;
  padding: 0;
  background: hsl(var(--border));
  overflow: hidden;
}

.palace-grid > .palace-card:nth-child(1) { grid-column: 1; grid-row: 1; }
.palace-grid > .palace-card:nth-child(2) { grid-column: 2; grid-row: 1; }
.palace-grid > .palace-card:nth-child(3) { grid-column: 3; grid-row: 1; }
.palace-grid > .palace-card:nth-child(4) { grid-column: 4; grid-row: 1; }
.palace-grid > .palace-card:nth-child(5) { grid-column: 1; grid-row: 2; }
.palace-grid > .palace-center { grid-column: 2 / span 2; grid-row: 2; }
.palace-grid > .palace-card:nth-child(7) { grid-column: 4; grid-row: 2; }
.palace-grid > .palace-card:nth-child(8) { grid-column: 1; grid-row: 3; }
.palace-grid > .palace-spacer:nth-child(9) { grid-column: 2; grid-row: 3; }
.palace-grid > .palace-spacer:nth-child(10) { grid-column: 3; grid-row: 3; }
.palace-grid > .palace-card:nth-child(11) { grid-column: 4; grid-row: 3; }
.palace-grid > .palace-card:nth-child(12) { grid-column: 1; grid-row: 4; }
.palace-grid > .palace-card:nth-child(13) { grid-column: 2; grid-row: 4; }
.palace-grid > .palace-card:nth-child(14) { grid-column: 3; grid-row: 4; }
.palace-grid > .palace-card:nth-child(15) { grid-column: 4; grid-row: 4; }

:deep(.palace-card) {
  min-height: 150px;
  border: 2px solid hsl(var(--border)) !important;
  border-radius: 0 !important;
  padding: 0.75rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  transition: all 0.2s ease !important;
  position: relative;
  overflow-y: auto;
  max-height: 200px;
  background: hsl(var(--card)) !important;
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05);
  margin: -1px 0 0 -1px;
}

/* è¦†è“‹ Card çµ„ä»¶çš„å…§è¯æ¨£å¼ */
:deep(.palace-card[style*="border-color"]) {
  border: 2px solid hsl(var(--border)) !important;
}

/* ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—çš„å¡ç‰‡ä¸éœ€è¦è² é‚Šè· */
.palace-grid > .palace-card:nth-child(1),
.palace-grid > .palace-card:nth-child(5),
.palace-grid > .palace-card:nth-child(8),
.palace-grid > .palace-card:nth-child(12) {
  margin-left: 0;
}

.palace-grid > .palace-card:nth-child(1),
.palace-grid > .palace-card:nth-child(2),
.palace-grid > .palace-card:nth-child(3),
.palace-grid > .palace-card:nth-child(4) {
  margin-top: 0;
}

:deep(.palace-card:hover) {
  transform: none !important;
  border: 3px solid hsl(var(--primary)) !important;
  border-color: hsl(var(--primary)) !important;
  border-width: 3px !important;
  border-style: solid !important;
  box-shadow: inset 0 0 0 2px hsl(var(--primary)), 0 0 0 3px hsla(var(--primary), 0.4) !important;
  z-index: 10;
  background: linear-gradient(135deg, hsla(var(--primary), 0.15), hsl(var(--card))) !important;
}

.palace-card.cursor-pointer {
  cursor: pointer;
}

.info-hint {
  font-size: 0.75rem;
}

:deep(.life-palace) {
  border: 2px solid hsl(var(--primary)) !important;
  background: linear-gradient(135deg, hsla(var(--primary), 0.15), hsl(var(--card))) !important;
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05), 0 0 0 2px hsla(var(--primary), 0.3) !important;
}

/* ç¢ºä¿å‘½å®®è¦†è“‹ Card çš„å…§è¯æ¨£å¼ */
:deep(.life-palace[style*="border-color"]) {
  border: 2px solid hsl(var(--primary)) !important;
}

:deep(.life-palace:hover) {
  border: 3px solid hsl(var(--primary)) !important;
  border-color: hsl(var(--primary)) !important;
  border-width: 3px !important;
  border-style: solid !important;
  box-shadow: inset 0 0 0 2px hsl(var(--primary)), 0 0 0 3px hsla(var(--primary), 0.4) !important;
  background: linear-gradient(135deg, hsla(var(--primary), 0.2), hsl(var(--card))) !important;
}

.palace-branch {
  font-size: 1.25rem;
  font-weight: bold;
  color: hsl(var(--muted-foreground));
  margin-bottom: 0.25rem;
}

.palace-name {
  font-size: 0.875rem;
  font-weight: 600;
  color: hsl(var(--card-foreground));
  margin-bottom: 0.5rem;
}

.palace-stars {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  align-items: center;
  width: 100%;
  flex-grow: 1;
  justify-content: center;
}

.star {
  font-size: 0.75rem;
  padding: 0.125rem 0.5rem;
  border-radius: 0.25rem;
  font-weight: 500;
  display: inline-block;
}

.main-star {
  background-color: #3b82f6;
  color: white;
}

.assistant-star {
  background-color: #10b981;
  color: white;
  font-size: 0.7rem;
}

.sha-star {
  background-color: #ef4444;
  color: white;
  font-size: 0.7rem;
}

.sihua {
  font-size: 0.7rem;
  font-weight: 600;
  padding: 0.125rem 0.375rem;
}

.sihua-lu {
  background-color: #fbbf24;
  color: #78350f;
}

.palace-center {
  grid-column: span 2;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 150px;
  border: 2px solid hsl(var(--border)) !important;
  border-radius: 0 !important;
  background: hsl(var(--muted)) !important;
  padding: 1rem;
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05);
  margin: -1px 0 0 -1px;
}

.center-content {
  text-align: center;
}

.center-title {
  font-size: 1.25rem;
  font-weight: bold;
  color: hsl(var(--card-foreground));
  margin-bottom: 0.5rem;
}

.center-info {
  color: hsl(var(--muted-foreground));
  margin-bottom: 0.75rem;
}

.center-meta {
  font-size: 0.7rem;
  color: hsl(var(--muted-foreground));
  text-align: left;
  padding: 0.5rem;
  background: hsl(var(--secondary));
  border-radius: 0.25rem;
}

.meta-item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.25rem;
}

.meta-label {
  color: hsl(var(--muted-foreground));
  font-weight: 500;
}

.meta-value {
  color: hsl(var(--card-foreground));
  font-weight: 600;
}

.palace-details {
  margin-top: 0.5rem;
  font-size: 0.65rem;
  width: 100%;
  text-align: left;
  padding-top: 0.5rem;
  border-top: 1px solid #e5e7eb;
}

.detail-section {
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.2rem;
}

.detail-label {
  color: hsl(var(--muted-foreground));
  font-weight: 500;
}

.detail-value {
  color: hsl(var(--card-foreground));
  font-weight: 500;
}

.palace-spacer {
  /* ç©ºç™½å€åŸŸï¼Œç”¨æ–¼ä¿æŒç¶²æ ¼çµæ§‹ */
  visibility: hidden;
}

/* å®®ä½é¡è‰²ä¸»é¡Œ - ä½¿ç”¨å·¦å´é‚Šæ¡†é¡è‰²æ¨™è­˜å’ŒèƒŒæ™¯è‰² */
.palace-life {
  border-left-color: #9c27b0 !important;
  border-left-width: 5px !important;
  background: linear-gradient(to right, rgba(156, 39, 176, 0.1), hsl(var(--card))) !important;
}

.palace-sibling {
  border-left-color: #ff9800 !important;
  border-left-width: 5px !important;
  background: linear-gradient(to right, rgba(255, 152, 0, 0.1), hsl(var(--card))) !important;
}

.palace-spouse {
  border-left-color: #e91e63 !important;
  border-left-width: 5px !important;
  background: linear-gradient(to right, rgba(233, 30, 99, 0.1), hsl(var(--card))) !important;
}

.palace-children {
  border-left-color: #00bcd4 !important;
  border-left-width: 5px !important;
  background: linear-gradient(to right, rgba(0, 188, 212, 0.1), hsl(var(--card))) !important;
}

.palace-wealth {
  border-left-color: #ffd700 !important;
  border-left-width: 5px !important;
  background: linear-gradient(to right, rgba(255, 215, 0, 0.15), hsl(var(--card))) !important;
}

.palace-health {
  border-left-color: #4caf50 !important;
  border-left-width: 5px !important;
  background: linear-gradient(to right, rgba(76, 175, 80, 0.1), hsl(var(--card))) !important;
}

.palace-travel {
  border-left-color: #ff5722 !important;
  border-left-width: 5px !important;
  background: linear-gradient(to right, rgba(255, 87, 34, 0.1), hsl(var(--card))) !important;
}

.palace-friends {
  border-left-color: #9e9e9e !important;
  border-left-width: 5px !important;
  background: linear-gradient(to right, rgba(158, 158, 158, 0.1), hsl(var(--card))) !important;
}

.palace-career {
  border-left-color: #1976d2 !important;
  border-left-width: 5px !important;
  background: linear-gradient(to right, rgba(25, 118, 210, 0.1), hsl(var(--card))) !important;
}

.palace-property {
  border-left-color: #795548 !important;
  border-left-width: 5px !important;
  background: linear-gradient(to right, rgba(121, 85, 72, 0.1), hsl(var(--card))) !important;
}

.palace-fortune {
  border-left-color: #673ab7 !important;
  border-left-width: 5px !important;
  background: linear-gradient(to right, rgba(103, 58, 183, 0.1), hsl(var(--card))) !important;
}

.palace-parents {
  border-left-color: #3f51b5 !important;
  border-left-width: 5px !important;
  background: linear-gradient(to right, rgba(63, 81, 181, 0.1), hsl(var(--card))) !important;
}
</style>

